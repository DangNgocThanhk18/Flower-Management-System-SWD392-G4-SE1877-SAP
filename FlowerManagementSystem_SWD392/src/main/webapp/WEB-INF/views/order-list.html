<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Your Orders</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<th:block th:insert="~{layout/header :: header}"></th:block>

<div class="container py-5">
  <h2 class="text-center mb-4">üì¶ Your Orders</h2>

  <!-- ‚úÖ Search & Filter Form -->
  <form th:action="@{/order/view}" method="get" class="row g-3 mb-4 align-items-center">
    <div class="col-md-4">
      <input type="text" name="keyword" class="form-control"
             placeholder="üîç Search by ID or Date..."
             th:value="${keyword}">
    </div>
    <div class="col-md-3">
      <select name="status" class="form-select">
        <option value="">All Status</option>
        <option value="Pending" th:selected="${status == 'Pending'}">Pending</option>
        <option value="Processing" th:selected="${status == 'Processing'}">Processing</option>
        <option value="Shipping" th:selected="${status == 'Shipping'}">Shipping</option>
        <option value="Completed" th:selected="${status == 'Completed'}">Completed</option>
        <option value="Cancelled" th:selected="${status == 'Cancelled'}">Cancelled</option>
      </select>
    </div>
    <div class="col-md-2">
      <button class="btn btn-success w-100">Filter</button>
    </div>
    <div class="col-md-2">
      <a th:href="@{/order/view}" class="btn btn-outline-secondary w-100">Reset</a>
    </div>
  </form>

  <!-- ‚úÖ Orders Table -->
  <table class="table table-bordered text-center align-middle shadow-sm">
    <thead class="table-success">
    <tr>
      <th>#</th>
      <th>Date</th>
      <th>Status</th>
      <th>Total</th>
      <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="order : ${orders}">
      <td th:text="${order.orderId}"></td>
      <td th:text="${order.orderDate}"></td>
      <td>
              <span th:class="${order.status == 'Completed' ? 'badge bg-success' :
                 (order.status == 'Shipping' ? 'badge bg-info' :
                 (order.status == 'Pending' ? 'badge bg-warning text-dark' :
                 (order.status == 'Cancelled' ? 'badge bg-danger' : 'badge bg-secondary')))}">
    <span th:text="${order.status}"></span>
</span>

      </td>
      <td th:text="${#numbers.formatDecimal(order.total, 1, 2)} + ' $'"></td>
      <td>
        <a th:href="@{/order/detail/{id}(id=${order.orderId})}" class="btn btn-primary btn-sm">View</a>
      </td>
    </tr>
    <tr th:if="${#lists.isEmpty(orders)}">
      <td colspan="5" class="text-center text-muted">No orders found.</td>
    </tr>
    </tbody>
  </table>

  <div class="text-center mt-3">
    <a th:href="@{/home}" class="btn btn-outline-secondary">‚Üê Back to Home</a>
  </div>
</div>

<th:block th:insert="~{layout/footer :: footer}"></th:block>
</body>
</html>
